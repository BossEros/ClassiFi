# Codebase Inconsistencies Report

This document outlines inconsistencies identified in the codebase, covering package management, configuration, dependencies, and architecture.

## 1. Package Management & Environment

### Package Manager Conflict
- **Requirement:** User explicitly mandated `pnpm` as the required package manager.
- **Reality:**
  - Both `frontend` and `backend-ts` directories contain `package-lock.json` (generated by npm) and are missing `pnpm-lock.yaml`.
  - `AGENTS.md` and `frontend/documentation.md` explicitly instruct to use `npm` commands (e.g., `npm run build`, `npm test`).
  - `backend-ts` build script uses `npx tsc-alias`.

### Recommendation
- Remove `package-lock.json` files.
- Run `pnpm install` to generate `pnpm-lock.yaml`.
- Update `AGENTS.md` and `documentation.md` to reference `pnpm` commands.
- Update scripts to use `pnpm` or local node_modules binaries instead of `npx` where appropriate (though `npx` usually works, consistency is preferred).

## 2. Dependencies & Versions

### TypeScript Version Mismatch
- **Frontend (`frontend/package.json`):** Uses `~5.9.3`.
- **Backend (`backend-ts/package.json`):** Uses `^5.7.2`.
- **Issue:** Version `5.9.3` is unusually high (current stable is ~5.4, 5.5 in beta as of mid-2024). This might be a typo or a specific/custom build, but the mismatch between frontend and backend versions is an inconsistency.

### Linting Configuration
- **Frontend:**
  - Has a `lint` script: `"lint": "eslint ."`.
  - Uses `eslint` ^9.39.1.
- **Backend:**
  - **Missing** `lint` script in `package.json`.
  - Uses `eslint` ^9.17.0 (different minor version).
  - Has `eslint` in `devDependencies` but no easy way to run it via `pnpm lint`.

## 3. Architecture (Frontend)

### Clean Architecture vs. Legacy Code
- **Rule:** The project follows Clean Architecture with `presentation`, `business`, and `data` layers.
- **Inconsistency:** A `src` directory exists in `frontend/` alongside the clean architecture folders.
  - Content: `frontend/src/components/plagiarism`.
  - Documentation: `frontend/documentation.md` mentions `src/` as "Feature-specific modules", which formalizes it but contradicts the strict layer separation implied by the other directories.

## 4. Documentation

### Deprecated References
- Memory indicates a "deprecated Python backend" (`backend-python-deprecated`), but this directory is not present in the root file list. If it was removed, references to it should be cleared.
- `AGENTS.md` mandates `npm` commands which conflicts with the project constraints.

## Summary of Action Items
1.  **Standardize on pnpm**: Delete `package-lock.json` files, generate `pnpm-lock.yaml`, and update docs.
2.  **Align TypeScript**: Verify the intended TypeScript version (likely 5.x stable) and use the same version across frontend and backend.
3.  **Fix Backend Scripts**: Add `"lint": "eslint ."` to `backend-ts/package.json`.
4.  **Frontend Cleanup**: Decide if `src/` should be refactored into `presentation/components` to strictly adhere to Clean Architecture.
